define(["exports","preact/jsx-runtime","preact","preact/compat","./hooks/UNSAFE_useFormContext","./hooks/UNSAFE_useFormFieldContext","./hooks/UNSAFE_useFocusableTextField","./UNSAFE_Label","./UNSAFE_TextField","./hooks/UNSAFE_useTextField","./UNSAFE_UserAssistance","./hooks/UNSAFE_useLengthFilter","preact/hooks","./hooks/UNSAFE_useCurrentValueReducer","./UNSAFE_TextArea","./ReadonlyTextFieldInput-8040cb97","./TextFieldInput-428b8905","./TextArea-9eb3116b"],function(e,t,n,s,a,i,l,o,r,u,d,c,x,g,m,h,b,p){"use strict";const F=({isReadonly:e,enabledElementRef:t,readonlyElementRef:n,minRows:s=2,maxRows:a,value:i})=>{x.useLayoutEffect(()=>{const i=e?n:t;if(null===i.current)return;if(i.current instanceof HTMLDivElement)return;const l=i.current,o=(e=>{const t=window.getComputedStyle(e),n=t.lineHeight;if("normal"===n)return 1.2*parseFloat(t.fontSize);return parseFloat(n)})(l);l.style.height="0";const{paddingHeight:r,borderHeight:u}=(e=>{const t=window.getComputedStyle(e);return{paddingHeight:parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),borderHeight:parseFloat(t.borderTop)+parseFloat(t.borderBottom)}})(l),d=o*s+r+u,c=l.scrollHeight+u;let x=0;if(void 0===a)x=c<d?d:c;else if(a>s){const e=o*a+r+u;x=c>e?e:c<d?d:c}else x=d;l.style.height=x+.5+"px"},[i,s,a,e])},v=s.forwardRef(({ariaDescribedBy:e,assistiveText:x,autoComplete:m="off",autoFocus:v=!1,helpSourceLink:f,helpSourceText:R,isDisabled:y,isReadonly:L,isRequired:A=!1,isRequiredShown:j,label:C,labelEdge:E,labelStartWidth:S,maxLength:T,maxLengthCounter:U="remaining",maxLengthUnit:w,maxRows:k,messages:D,minRows:I=2,placeholder:O,role:N,textAlign:_,userAssistanceDensity:H,value:B,variant:P="default",onInput:V,onCommit:M},q)=>{const{currentCommitValue:W,dispatch:z}=g.useCurrentValueReducer({value:B}),G=s.useCallback(e=>{z({type:"input",payload:e.value}),null==V||V(e)},[V]),J=s.useCallback(e=>{z({type:"commit",payload:e.value}),null==M||M(e)},[M]),{isDisabled:K,isReadonly:Q,labelEdge:X,labelStartWidth:Y,textAlign:Z,userAssistanceDensity:$}=a.useFormContext(),ee=null!=y?y:K,te=null!=L?L:Q,ne=null!=E?E:X,se=null!=S?S:Y,ae=null!=_?_:Z,ie=null!=H?H:$,{enabledElementRef:le,readonlyElementRef:oe,focusProps:re,isFocused:ue}=l.useFocusableTextField({isDisabled:ee,isReadonly:te,ref:q}),{formFieldContext:de,inputProps:ce,labelProps:xe,textFieldProps:ge,userAssistanceProps:me}=u.useTextField({ariaDescribedBy:e,contentVariant:"textarea",isDisabled:ee,isFocused:ue,isReadonly:te,labelEdge:ne,messages:D,styleVariant:P,value:B}),{isMaxLengthExceeded:he,valueLength:be,onFilteredInput:pe}=c.useLengthFilter({maxLength:T,maxLengthUnit:w,value:B,onInput:G,onCommit:J}),Fe="none"!==ne?t.jsx(o.Label,Object.assign({},xe,{children:C})):void 0,ve={label:"none"!==ne?Fe:void 0,labelEdge:"none"!==ne?ne:void 0,labelStartWidth:"none"!==ne?se:void 0},fe="none"===ne?C:void 0,Re=ee||te?"efficient"!==ie?void 0:t.jsx(d.InlineUserAssistance,Object.assign({userAssistanceDensity:ie},me)):t.jsx(d.InlineUserAssistance,Object.assign({assistiveText:x,fieldLabel:C,helpSourceLink:f,helpSourceText:R,messages:D,isRequiredShown:j,userAssistanceDensity:ie},me));if(F({isReadonly:te,enabledElementRef:le,readonlyElementRef:oe,minRows:I,maxRows:k,value:B}),te)return t.jsx(i.FormFieldContext.Provider,Object.assign({value:de},{children:t.jsx(r.ReadonlyTextField,Object.assign({role:"presentation",inlineUserAssistance:Re,variant:"textarea"},ve,{children:t.jsx(h.ReadonlyTextFieldInput,Object.assign({ariaDescribedBy:e,ariaLabel:fe,ariaLabelledBy:xe.id,elementRef:oe},k?{as:"textarea",rows:I}:{as:"div"},{autoFocus:v,textAlign:ae,value:B,variant:"textarea",hasInsideLabel:void 0!==C&&"inside"===ne}))}))}));const ye=s.useCallback(()=>{var e,t;const n=le.current,s=n?n.value.length:null;null===(e=le.current)||void 0===e||e.setSelectionRange(s,s),null===(t=le.current)||void 0===t||t.focus()},[]),Le=t.jsxs(n.Fragment,{children:[t.jsx(b.TextFieldInput,Object.assign({as:"textarea",ariaLabel:fe,autoComplete:m,autoFocus:v,currentCommitValue:W,hasInsideLabel:void 0!==Fe&&"inside"===ne,isRequired:A,inputRef:le,onCommit:J,onInput:pe,placeholder:O,role:N,rows:I,textAlign:ae,value:B},ce)),"remaining"===U&&void 0!==T&&t.jsx(p.MaxLengthCounter,Object.assign({},{maxLength:T,valueLength:be,parentHasFocus:ue,onClick:ye})),void 0!==T&&t.jsx(r.MaxLengthLiveRegion,Object.assign({},{isMaxLengthExceeded:he,maxLength:T,valueLength:be}))]});return t.jsx(i.FormFieldContext.Provider,Object.assign({value:de},{children:t.jsx(r.TextField,Object.assign({mainContent:Le,inlineUserAssistance:Re,onBlur:null==re?void 0:re.onfocusout,onFocus:null==re?void 0:re.onfocusin},ge,ve))}))});e.TextAreaAutosize=v});
//# sourceMappingURL=TextAreaAutosize-60cacec3.js.map
