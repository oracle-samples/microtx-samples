{"version":3,"file":"SelectMenuItem-b8c69e06.js","sources":["../../src/UNSAFE_Menu/SelectMenuGroupContext.tsx","../../src/UNSAFE_Menu/SelectMenuItem.tsx","../../src/UNSAFE_Menu/useSelectMenuGroupContext.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { createContext } from 'preact';\n\nimport { MenuValueUpdateDetail } from './menuUtils';\n\ntype SelectSingleMenuGroupContextProps = {\n  isMultiple: false;\n  value?: string;\n  onCommit?: (detail: MenuValueUpdateDetail<string>) => void;\n};\ntype SelectMultipleMenuGroupContextProps = {\n  isMultiple: true;\n  value?: string[];\n  onCommit?: (detail: MenuValueUpdateDetail<string[]>) => void;\n};\n\ntype SelectMenuGroupContextProps =\n  | SelectSingleMenuGroupContextProps\n  | SelectMultipleMenuGroupContextProps;\n\nconst SelectMenuGroupContext = createContext<SelectMenuGroupContextProps>({\n  isMultiple: false\n});\n\nexport { SelectMenuGroupContext, SelectMenuGroupContextProps };\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren } from 'preact';\nimport { useMemo } from 'preact/hooks';\n\nimport { CheckIcon } from '../UNSAFE_ThemedIcons';\n\nimport { BaseMenuItem } from './MenuItem';\nimport { useSelectMenuGroupContext } from './useSelectMenuGroupContext';\n\ntype SelectMenuItemProps = {\n  value: string;\n  label: string;\n  isDisabled?: boolean;\n  endIcon?: ComponentChildren;\n};\n\nexport function SelectMenuItem({ value, label, isDisabled, endIcon }: SelectMenuItemProps) {\n  const { isMultiple, value: selectedValue, onCommit } = useSelectMenuGroupContext();\n\n  const { isSelected, memoizedOnCommit } = useMemo(() => {\n    if (!isMultiple) {\n      return {\n        isSelected: selectedValue === value,\n        memoizedOnCommit: () => {\n          onCommit?.({ value, previousValue: selectedValue });\n        }\n      };\n    }\n    return {\n      isSelected: !!selectedValue?.includes(value),\n      memoizedOnCommit: () => {\n        const proposedValue = isSelected\n          ? selectedValue?.filter((val) => val !== value) || []\n          : [...(selectedValue || []), value];\n        onCommit?.({ value: proposedValue, previousValue: selectedValue });\n      }\n    };\n  }, [selectedValue, value, onCommit, isMultiple]);\n\n  return (\n    <BaseMenuItem\n      role={isMultiple ? 'menuitemcheckbox' : 'menuitemradio'}\n      isChecked={isSelected}\n      isDisabled={isDisabled}\n      startIcon={isSelected ? <CheckIcon /> : <span></span>}\n      label={label}\n      onAction={memoizedOnCommit}\n      endIcon={endIcon}\n    />\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useContext } from 'preact/hooks';\nimport { SelectMenuGroupContext } from './SelectMenuGroupContext';\n\n/**\n * Utility hook for consuming the MenuContext\n *\n * @returns The value of MenuContext provider\n */\nfunction useSelectMenuGroupContext() {\n  return useContext(SelectMenuGroupContext);\n}\n\nexport { useSelectMenuGroupContext };\n"],"names":["SelectMenuGroupContext","createContext","isMultiple","value","label","isDisabled","endIcon","selectedValue","onCommit","useContext","isSelected","memoizedOnCommit","useMemo","includes","proposedValue","filter","val","previousValue","_jsx","BaseMenuItem","role","isChecked","startIcon","CheckIcon","onAction"],"mappings":"ooCA2BM,MAAAA,EAAyBC,EAAAA,cAA2C,CACxEC,YAAY,gDCLR,UAAyBC,MAAEA,EAAFC,MAASA,EAATC,WAAgBA,EAAhBC,QAA4BA,IACzD,MAAMJ,WAAEA,EAAYC,MAAOI,EAArBC,SAAoCA,GCPnCC,EAAAA,WAAWT,IDSZU,WAAEA,EAAFC,iBAAcA,GAAqBC,EAAOA,QAAC,IAC1CV,EAQE,CACLQ,cAAcH,MAAAA,OAAA,EAAAA,EAAeM,SAASV,IACtCQ,iBAAkB,KAChB,MAAMG,EAAgBJ,GAClBH,MAAAA,OAAA,EAAAA,EAAeQ,OAAQC,GAAQA,IAAQb,KAAU,gCAC5CI,GAAiB,IAFM,CAEDJ,IAC/BK,MAAAA,GAAAA,EAAW,CAAEL,MAAOW,EAAeG,cAAeV,MAb7C,CACLG,WAAYH,IAAkBJ,EAC9BQ,iBAAkB,KAChBH,MAAAA,GAAAA,EAAW,CAAEL,MAAAA,EAAOc,cAAeV,MAaxC,CAACA,EAAeJ,EAAOK,EAAUN,IAEpC,OACEgB,MAACC,EAAYA,aAAA,CACXC,KAAMlB,EAAa,mBAAqB,gBACxCmB,UAAWX,EACXL,WAAYA,EACZiB,UAAWZ,EAAaQ,MAACK,EAAAA,gBAAeL,MAAA,OAAA,IACxCd,MAAOA,EACPoB,SAAUb,EACVL,QAASA"}