{"version":3,"file":"UNSAFE_ProgressBar.js","sources":["../../src/UNSAFE_ProgressBar/ProgressBar.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ComponentProps } from 'preact';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { cssProps } from '@oracle/oraclejet-cssprops';\nimport { useUser } from '../hooks/UNSAFE_useUser';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport type { BundleType } from '../resources/nls/bundle';\nimport { BarTrack, BarValue } from '../PRIVATE_Meter';\nimport { HTMLAttributesSignalExcluded } from '../utils/UNSAFE_attributeUtils';\n\ntype ariaPropsType = ComponentProps<typeof BarTrack>['ariaProps'];\n\ntype IntrinsicProps = Pick<\n  HTMLAttributesSignalExcluded<HTMLDivElement>,\n  'id' | 'class' | 'children'\n>;\n\ntype Props = {\n  /**\n   * Specifies the id of the progress bar.  If the progress bar is being used to describe the loading process of a particular region\n   * of the page, then the aria-describedby attribute of the region must point to the id of the ProgressBar\n   */\n  id?: IntrinsicProps['id'];\n  /**\n   * The value of the progress bar.  If the value is 'indeterminate', an indeterminate progress bar will be shown.\n   */\n  value?: 'indeterminate' | number;\n\n  /**\n   * Whether the progress bar is positioned at the top edge of a container or not.\n   * If set to 'top', the curved borders will be removed.\n   */\n  edge?: 'none' | 'top';\n\n  /**\n   * The maximum value of the progress bar.\n   */\n  max?: number;\n  /**\n   * The width of the progress bar.  This will use the CSS lengths styling.\n   */\n  // TODO: use the dimensions work the Jeanne is doing JET-49961\n  width?: string;\n\n  /**\n   * A label to be used for accessibility purposes when value is set to 'indeterminate'.\n   */\n  accessibleLabel?: string;\n};\n/**\n * A progress bar allows the user to visualize the progression of an extended computer operation.\n */\nexport function ProgressBar({ value, max, ...otherProps }: Props) {\n  return value === 'indeterminate' ? (\n    <IndeterminateProgressBar {...otherProps} />\n  ) : (\n    <DeterminateProgressBar value={value} max={max} {...otherProps} />\n  );\n}\n\ntype IndeterminateProps = Omit<Props, 'value' | 'max'>;\n\nconst IndeterminateProgressBar = ({\n  accessibleLabel,\n  id,\n  width,\n  edge = 'none'\n}: IndeterminateProps) => {\n  const { direction } = useUser();\n  const classes = classNames([styles.value, styles.indeterminate, styles[direction]]);\n  const baseClasses = classNames([styles.base, edge === 'none' && styles.standalone]);\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const ariaProps: ariaPropsType = {\n    'aria-valuetext': accessibleLabel || translations.progressIndeterminate(),\n    role: 'progressbar'\n  };\n  return (\n    <BarTrack id={id} ariaProps={ariaProps} class={baseClasses} length={width}>\n      <BarValue class={classes} />\n    </BarTrack>\n  );\n};\n\ntype DeterminateProps = Omit<Props, 'accessibleLabel'> & {\n  value?: number;\n};\n\nconst DeterminateProgressBar = ({\n  value = 0,\n  max = 100,\n  id,\n  width,\n  edge = 'none'\n}: DeterminateProps) => {\n  const percentage = `${Math.min(Math.max(0, value / max), 1) * 100}%`;\n  const baseClasses = classNames([styles.base, edge === 'none' && styles.standalone]);\n  const ariaProps: ariaPropsType = {};\n  ariaProps['aria-valuemin'] = value != null ? '0' : undefined;\n  ariaProps['aria-valuemax'] = value != null ? `${max}` : undefined;\n  ariaProps['aria-valuenow'] = value != null ? `${value}` : undefined;\n  ariaProps['role'] = 'progressbar';\n  return (\n    <BarTrack ariaProps={ariaProps} id={id} length={width} class={baseClasses}>\n      <BarValue class={styles.value} length={percentage} />\n    </BarTrack>\n  );\n};\n\nconst styles = {\n  base: cssProps`${{\n    height: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-height)',\n    position: 'relative',\n    boxSizing: 'border-box',\n    overflowX: 'hidden',\n    backgroundColor: 'var(--oj-c-PRIVATE-DO-NOT-USE-meter-track-bg-color)'\n  }}`,\n  value: cssProps`${{\n    margin: '0',\n    backgroundColor: 'var(--oj-c-PRIVATE-DO-NOT-USE-meter-value-bg-color)',\n    height: '100%',\n    boxSizing: 'border-box'\n  }}`,\n  indeterminate: cssProps`${{\n    width: '25%',\n    height: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-height)',\n    backgroundColor: 'var(--oj-c-PRIVATE-DO-NOT-USE-meter-value-bg-color)',\n    position: 'relative',\n    animationDuration: '2s',\n    animationTimingFunction: 'linear',\n    animationIterationCount: 'infinite'\n  }}`,\n  standalone: cssProps`${{\n    borderRadius: 'var(--oj-c-PRIVATE-DO-NOT-USE-progress-bar-border-radius)'\n  }}`,\n  rtl: cssProps`${{\n    animationName: 'var(--oj-c-PRIVATE-DO-NOT-USE-private-progress-bar-indeterminate-animation-rtl)'\n  }}`,\n  ltr: cssProps`${{\n    animationName: 'var(--oj-c-PRIVATE-DO-NOT-USE-private-progress-bar-indeterminate-animation)'\n  }}`\n};\n"],"names":["IndeterminateProgressBar","accessibleLabel","id","width","edge","direction","useUser","classes","classNames","styles","value","indeterminate","baseClasses","base","standalone","translations","useTranslationBundle","ariaProps","progressIndeterminate","role","_jsx","BarTrack","Object","assign","class","length","children","jsx","BarValue","DeterminateProgressBar","max","undefined","percentage","_a","otherProps"],"mappings":"iVAoEA,MAAAA,EAAA,EAAAC,gBAAAA,EAAAC,GAAAA,EAAAC,MAAAA,EAAAC,KAAAA,EAAA,WAME,MAAAC,UAAAA,GAAAC,EAAAA,UACAC,EAAAC,EAAAA,WAAA,CAAAC,EAAAC,MAAAD,EAAAE,cAAAF,EAAAJ,KACAO,EAAAJ,aAAA,CAAAC,EAAAI,KAAA,SAAAT,GAAAK,EAAAK,aACAC,EAAAC,uBAAA,4BACAC,EAAA,CACE,iBAAAhB,GAAAc,EAAAG,wBACAC,KAAA,eAEF,OAAAC,MAAAC,EAAAA,SAAAC,OAAAC,OAAA,CAAArB,GAAAA,EAAAe,UAAAA,EAAAO,MAAAZ,EAAAa,OAAAtB,GAAA,CAAAuB,SAAAN,EAAAO,IAAAC,WAAA,CAAAJ,MAAAjB,QAWFsB,EAAA,EAAAnB,MAAAA,EAAA,EAAAoB,IAAAA,EAAA,IAAA5B,GAAAA,EAAAC,MAAAA,EAAAC,KAAAA,EAAA,uDAQEQ,EAAAJ,aAAA,CAAAC,EAAAI,KAAA,SAAAT,GAAAK,EAAAK,kBAMA,OAJAG,EAAA,iBAAA,MAAAP,EAAA,SAAAqB,EACAd,EAAA,iBAAA,MAAAP,EAAAoB,GAAAA,SAAAC,EACAd,EAAA,iBAAA,MAAAP,EAAAA,GAAAA,SAAAqB,EACAd,EAAA,KAAA,cACAG,MAAAC,EAAAA,SAAAC,OAAAC,OAAA,CAAAN,UAAAA,EAAAf,GAAAA,EAAAuB,OAAAtB,EAAAqB,MAAAZ,GAAA,CAAAc,SAAAN,EAAAO,IAAAC,WAAA,CAAAJ,MAAAf,EAAAC,MAAAe,OAAAO,QAOFvB,EAAA,MAAA,eAAA,wBAAA,oBAAA,eAAA,uCAxDA,SAAAwB,sDACE,MAAA,kBAAAvB,EAAAU,EAAAO,IAAA3B,EAAAsB,OAAAC,OAAA,GAAAW,IAAAd,EAAAA,IAAAS,EAAAP,OAAAC,OAAA,CAAAb,MAAAA,EAAAoB,IAAAA,GAAAI"}