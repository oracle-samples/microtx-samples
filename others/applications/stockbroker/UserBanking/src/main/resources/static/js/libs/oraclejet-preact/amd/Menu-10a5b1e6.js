define(["exports","preact/jsx-runtime","preact/hooks","./UNSAFE_Floating","./UNSAFE_Layer","./hooks/UNSAFE_useOutsideClick","./hooks/PRIVATE_useCollectionFocusRing","./utils/UNSAFE_mergeProps",'module',"./MenuItem-e2bab57b","./Floating-44114750"],function(e,n,t,r,s,l,u,o,i,a,c){"use strict";const f=e=>e.dataset.ojMenuItemKey,d=e=>{if(e){const n=e.querySelector("[data-oj-menu-item-key]");if(n){const e=f(n);if(e)return e}}return null},m=(e,n,t)=>()=>{if(e){const r=Array.from(e.querySelectorAll("[data-oj-menu-item-key]"));let s=r.findIndex(e=>f(e)===t)+(n?-1:1);const l=r.length-1;return s<0&&(s=l),s>l&&(s=0),f(r[s])||null}return null},y=e=>{const n=e.closest("[data-oj-menu-item-key]");if(n){const e=f(n);return void 0===e?null:e}return null},g=e=>({onKeyDown:n=>{"Tab"===n.key?(null==e||e({reason:"tabbing"}),n.preventDefault()):"Escape"===n.key&&(null==e||e({reason:"cancel"}))}}),p="_1bxdy0c",b="_1sj2q80",k=200;e.Menu=({children:e,isOpen:r=!1,anchorRef:i,onClose:v,accessibleLabel:h,initialFocus:j="menu"})=>{const A=t.useRef(null),C=t.useRef(null),x=t.useRef(),[D,F]=t.useState(),[w,R]=t.useState("pending"),K=t.useCallback(e=>{F(e.value),R("firstItem")},[]),[S,E]=u.useCollectionFocusRing(e=>{var n;return!!(null===(n=C.current)||void 0===n?void 0:n.contains(e))},["ArrowUp","ArrowDown"],e=>!!y(e)),{currentKeyProps:P}=function(e,n,r,s,l,u,o){const i=t.useCallback(e=>{if(o)if("ArrowDown"!==e.key||e.shiftKey)if("ArrowUp"!==e.key||e.shiftKey){if("Home"===e.key){const n=s();n&&u!=n&&o({value:n}),e.preventDefault()}else if("End"===e.key){const n=l();n&&u!=n&&o({value:n}),e.preventDefault()}}else{const t=n();t&&u!=t&&o({value:t}),e.preventDefault()}else{const n=r();n&&u!=n&&o({value:n}),e.preventDefault()}},[u,r,n,o,s,l]),a=t.useCallback(n=>{if(o&&!n.shiftKey){const t=e(n.target);t&&u!=t&&o({value:t})}},[u,e,o]);return{currentKeyProps:null==o?{}:{onClickCapture:a,onKeyDown:i}}}(e=>y(e),m(C.current,!0,D),m(C.current,!1,D),()=>d(C.current),()=>(e=>{if(e){const n=e.querySelectorAll("[data-oj-menu-item-key]"),t=n[n.length-1];if(t){const e=f(t);if(e)return e}}return null})(C.current),D,K),I=t.useCallback(e=>{null==v||v({reason:"outsideClick",target:e.target})},[v]);return l.useOutsideClick({isDisabled:!r,ref:[A],handler:I}),t.useEffect(()=>{if(r!==x.current){if(r){const e=C.current;if(e)if("menu"===j)setTimeout(()=>{e.focus()},0),R("menu");else{const e=d(C.current);e?K({value:e}):R("menu")}}else R("pending"),F(void 0);x.current=r}},[r,j,K]),r?n.jsx(s.Layer,Object.assign({logicalParentRef:i},{children:n.jsx(c.Floating,Object.assign({class:p,ref:A,anchorRef:i,placement:"bottom-start",offsetValue:{mainAxis:4,crossAxis:0}},{children:n.jsx(a.MenuContext.Provider,Object.assign({value:{onClose:v,currentKey:D,showFocusRing:S}},{children:n.jsx("div",Object.assign({style:{minWidth:`${i.current&&i.current.offsetWidth>k?i.current.offsetWidth:k}px`},ref:C,tabIndex:"firstItem"===w?-1:0,role:"menu","aria-label":h,class:b},o.mergeProps(E,P,{onPointerDown:e=>{y(e.target)||e.preventDefault()}},g(v)),{children:e}))}))}))})):null}});
//# sourceMappingURL=Menu-10a5b1e6.js.map
