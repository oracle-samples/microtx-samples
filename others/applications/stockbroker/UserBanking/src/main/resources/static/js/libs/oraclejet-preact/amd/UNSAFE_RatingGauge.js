function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}define(["exports","./tslib.es6-42e4f430","preact/jsx-runtime","preact","preact/hooks","css!./UNSAFE_RatingGauge.css","./utils/UNSAFE_classNames","./classNames-e842f86a","./hooks/UNSAFE_useUser","./hooks/UNSAFE_useTooltip","./utils/UNSAFE_mergeProps","./hooks/UNSAFE_useTabbableMode","./UNSAFE_Environment","./UNSAFE_Layer","preact/compat","./hooks/UNSAFE_useId","./UNSAFE_Floating","./Floating-44114750","./index-e6354839","./utils/PRIVATE_floatingUtils","./utils/PRIVATE_refUtils","./hooks/UNSAFE_useOutsideClick","./utils/UNSAFE_arrayUtils","./hooks/UNSAFE_useHover","./hooks/UNSAFE_useToggle","./hooks/UNSAFE_useFocus","./hooks/UNSAFE_useTouch","./hooks/UNSAFE_useAnimation","./useAnimation-1a52f0c4"],function(e,t,a,o,r,s,i,l,n,c,d,u,b,p,y,h,m,_,f,A,x,v,g,k,j,S,w,R,U){"use strict";const C=({isSelected:e,isDisabled:t,isReadOnly:o,color:r})=>{const s=`${e?"selected":"unselected"}${t&&"Disabled"||o&&"Readonly"||""}`,i=D[`${s}Color`],n=D[`${s}BorderColor`];return a.jsx("svg",Object.assign({viewBox:"0 0 36 36",height:"100%",width:"100%",class:l.classNames([D.base,`oj-c-rating-gauge-${r}`])},{children:a.jsxs("g",{children:[a.jsx("path",{class:i,d:"m18 1 5.0061 11.9524 12.9939 1.0344-9.9 8.4215 3.0246 12.5917-11.1246-6.7476-11.12461 6.7476 3.02461-12.5917-9.9-8.4215 12.9939-1.0344z"}),a.jsx("path",{class:n,d:"m23.0061 12.9524-5.0061-11.9524-5.0061 11.9524-12.9939 1.0344 9.9 8.4215-3.02461 12.5917 11.12461-6.7476 11.1246 6.7476-3.0246-12.5917 9.9-8.4215zm10.5043 1.8394-8.5262 7.2528 2.6077 10.8562-9.5919-5.818-9.59192 5.818 2.60772-10.8562-8.52615-7.2528 11.19115-.891 4.3192-10.31227 4.3192 10.31227z"})]})}))},D={base:"_11vv1gn",selectedColor:"_7gke7",selectedBorderColor:"a0jxfw",unselectedColor:"_1an75ic",unselectedBorderColor:"_1ijuajx",selectedReadonlyColor:"_2b0ps4",selectedReadonlyBorderColor:"_1otoi79",unselectedReadonlyColor:"qxqcm2",unselectedReadonlyBorderColor:"_18au7p4",selectedDisabledColor:"_1618kiz",unselectedDisabledColor:"_1kkc2ua",selectedDisabledBorderColor:"_61nxpz",unselectedDisabledBorderColor:"k3hbn"},E=({fillRatio:e,isDisabled:t,isReadonly:r,color:s})=>{const{direction:i}=n.useUser(),l="rtl"===i;return 1===e||0===e?a.jsx(C,{isSelected:1===e,isDisabled:t,isReadOnly:r,color:s}):a.jsxs(o.Fragment,{children:[a.jsx("div",Object.assign({class:N.base,style:{clipPath:`inset(0% ${l?100*(1-e):0}% 0% ${l?0:100*e}%)`}},{children:a.jsx(C,{isSelected:!1,isDisabled:t,isReadOnly:r,color:s})})),a.jsx("div",Object.assign({class:N.base,style:{clipPath:`inset(0% ${l?0:100*(1-e)}% 0% ${l?100*(1-e):0}%)`}},{children:a.jsx(C,{isSelected:!0,isDisabled:t,isReadOnly:r,color:s})}))]})},N={base:"_1cw9tib"};function F(e,t,a,o,r){const s=o.current;if(!s||0===s.width)return-1;const i=e-s.x,l=t*(r?s.width-i:i)/s.width/a;return l<.5?0:Math.ceil(l)*a}function T(e){if(!e)return{width:0,x:0};const t=e.getBoundingClientRect();return{width:Math.round(t.width),x:Math.round(t.x+window.scrollX)}}const M={base:"_14u2j9t",interactive:"z5fykl",lg:"v2ycil",md:"r93lxy",sm:"_1gk2ebo",item:"_1esulzl"};e.RatingGauge=function(e){var{max:s=5,value:i=0,size:b="md",color:p="neutral",step:y=1,isReadonly:h,isDisabled:m}=e,_=t.__rest(e,["max","value","size","color","step","isReadonly","isDisabled"]);const f=r.useRef(null),A=r.useRef(T(null)),x=!h&&!m;r.useEffect(()=>{A.current=T(f.current)},[b,s]);const v=((e,t,a,o,s,i,l,c)=>{const d=r.useRef(),{direction:u}=n.useUser();if(!i)return{};const b="rtl"===u,p=e=>{null==c||c({value:e}),d.current=e},y=e=>{e.preventDefault(),e.stopPropagation()};return{onPointerUp:a=>{const o=F(a.pageX,e,t,s,b);-1!==o&&(null==l||l({value:o}))},onBlur:()=>{null==l||l({value:a})},onPointerMove:a=>{const o=F(a.pageX,e,t,s,b);-1!==o&&o!=d.current&&p(o)},onKeyUp:t=>{switch(t.key){case"Enter":null==l||l({value:a});break;case"Tab":p(a);break;case"Home":p(0);break;case"End":p(e)}y(t)},onKeyDown:o=>{switch(o.key){case"Tab":return;case"ArrowDown":p(Math.max(0,a-t));break;case"ArrowUp":p(Math.min(e,a+t));break;case"ArrowLeft":{const o=b?Math.min(e,a+t):Math.max(0,a-t);p(o);break}case"ArrowRight":{const o=b?Math.max(0,a-t):Math.min(e,a+t);p(o);break}}y(o)},onPointerLeave:()=>{p(void 0)},onPointerEnter:()=>{s.current=T(o.current)}}})(s,y,i,f,A,x,_.onCommit,_.onInput),{tooltipContent:g,tooltipProps:k}=function({max:e,value:t,isReadonly:a,isDisabled:o,tooltip:s,datatip:i,ariaDescribedBy:l,width:n}){const[d,u]=r.useState(!1),b=a&&!o?"tooltip":"datatip",p=o||!("tooltip"===b&&s||"datatip"===b&&i),y=Math.max(1,Math.ceil(t)),h="tooltip"===b?0:(y-Math.ceil(e/2))*n/e,{tooltipContent:m,tooltipProps:_}=c.useTooltipControlled({text:"tooltip"===b?s:i,isOpen:d,anchor:{x:"element",y:"element"},position:"bottom",offset:{mainAxis:8,crossAxis:h},isDisabled:p,onToggle:({value:e})=>u(e),variant:b});return _["aria-describedby"]=[l,_["aria-describedby"]].filter(Boolean).join(" "),{tooltipContent:m,tooltipProps:_}}({max:s,value:i,isReadonly:h,isDisabled:m,tooltip:_.tooltip,datatip:_.datatip,width:A.current.width,ariaDescribedBy:_.ariaDescribedBy}),j=d.mergeProps(v,k),S=(e=>e.accessibleLabel?e.accessibleLabel:e.tooltip&&e.isReadonly&&!e.isDisabled?e.tooltip:void 0)({accessibleLabel:_.accessibleLabel,tooltip:_.tooltip,isReadonly:h,isDisabled:m}),{isTabbable:w}=u.useTabbableMode();return a.jsxs(o.Fragment,{children:[a.jsx("div",Object.assign({ref:f,class:l.classNames([M.base,x?M.interactive:void 0]),"aria-label":S,role:"slider","aria-valuemin":"0","aria-valuenow":i,"aria-valuemax":s,"aria-valuetext":i,"aria-labelledby":_.ariaLabelledBy,tabIndex:w&&!m?0:-1,"aria-disabled":m?"true":void 0,"aria-readonly":h&&!m?"true":void 0},j,{children:_toConsumableArray(Array(s)).map((e,t)=>{const o=Math.min(Math.max(0,i-t),1);return a.jsx("div",Object.assign({className:l.classNames([M[b],M.item])},{children:a.jsx(E,{fillRatio:o,isDisabled:m,isReadonly:h,color:p})}))})})),g]})},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=UNSAFE_RatingGauge.js.map
