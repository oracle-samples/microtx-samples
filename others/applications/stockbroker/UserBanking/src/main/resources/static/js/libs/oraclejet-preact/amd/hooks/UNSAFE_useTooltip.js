define(["exports","preact/hooks","preact/jsx-runtime","./UNSAFE_useId","../UNSAFE_Floating","../UNSAFE_Layer","./UNSAFE_useHover","./UNSAFE_useFocus","./UNSAFE_useTouch","../utils/UNSAFE_mergeProps","../utils/UNSAFE_arrayUtils","../tslib.es6-42e4f430","./UNSAFE_useAnimation","css!./UNSAFE_useTooltip.css","../utils/UNSAFE_classNames","../useAnimation-1a52f0c4","../classNames-e842f86a","../Floating-44114750","preact/compat","preact","./UNSAFE_useToggle","../index-e6354839","./UNSAFE_useUser","../UNSAFE_Environment","../utils/PRIVATE_floatingUtils","../utils/PRIVATE_refUtils","./UNSAFE_useOutsideClick"],function(e,t,n,o,s,i,u,r,a,l,c,d,m,p,f,g,v,h,b,E,A,P,x,T,_,y,F){"use strict";const N="sha9ax",S="efwkrt",U="_1e4qwkg",R="qnfyk6",j=e=>{var{children:s,isOpen:i,isDatatip:u,onTransitionEnd:r}=e,a=d.__rest(e,["children","isOpen","isDatatip","onTransitionEnd"]);const l=o.useId(),c=t.useRef(null),m=t.useRef(null),{nodeRef:p}=g.useAnimation(i?"mounted":"unmounted",{animationStates:{mounted:e=>{const t=e.firstChild;return{from:{maxHeight:"0",opacity:"0%"},to:{maxHeight:`${null==t?void 0:t.offsetHeight}px`,opacity:u?"100%":"95%"},options:{duration:u?1:100,easing:[0,0,.2,1]}}},unmounted:e=>({from:{opacity:u?"100%":"95%"},to:{maxHeight:"0",opacity:"0%"},options:{duration:u?1:100,easing:[0,0,.2,1]}})},isAnimatedOnMount:!0,onAnimationEnd:()=>null==r?void 0:r()});return t.useEffect(()=>{var e,t;c.current&&(null===(e=m.current)||void 0===e?void 0:e.offsetHeight)&&(c.current.style.height=`${null===(t=m.current)||void 0===t?void 0:t.offsetHeight}px`)},[]),n.jsx("div",Object.assign({ref:c,id:l,role:"tooltip",class:N},{children:n.jsx("div",Object.assign({ref:p,class:v.classNames([S])},a,{children:n.jsx("div",Object.assign({ref:m,class:v.classNames([U,u?R:""])},{children:s}))}))}))},O=(c.stringLiteralArray(["start","top-start","top","top-end","end","bottom-end","bottom","bottom-start"]),c.stringLiteralArray(["element","pointer"]),({text:e,isOpen:s=!1,variant:c="tooltip",position:d="bottom",isDisabled:m=!1,anchor:p={x:"element",y:"element"},offset:f={mainAxis:0,crossAxis:0},onToggle:g})=>{const v=m||!e,b=t.useRef(!0),[E,A]=t.useState(!v&&s?"mounting":"unmounted"),[P,x]=t.useState(!1);x(!1);const T="datatip"===c,_=t.useRef(!0),{hoverProps:y,isHover:F}=u.useHover({isDisabled:m}),{touchProps:N,isTouch:S}=a.useTouch({isDisabled:m}),{focusProps:U,isFocus:R}=r.useFocus({isDisabled:F||S}),{hoverProps:O,isHover:H}=u.useHover({isDisabled:m}),k="pointer"===p.x||"pointer"===p.y,B=o.useId(),D=t.useRef(null),L=t.useRef({x:0,y:0}),C=k&&!R?L:D,I=T?0:250,w=t.useRef(null),G=t.useRef(null),M=()=>{w.current&&clearTimeout(w.current)},V=t.useCallback(e=>{if(e)switch(E){case"unmounting":case"unmounted":A("mountPending");break;case"unmountPending":M(),A("mounted")}else switch(E){case"mounting":case"mounted":A("unmountPending");break;case"mountPending":M(),A("unmounted")}},[E]);t.useEffect(()=>{b.current?b.current=!1:A(s?"mounting":"unmounting")},[s]),t.useEffect(()=>{_.current?_.current=!1:k&&F&&"unmounted"===E||(G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{V(F||R||H||S)},20))},[F,R,H,S,k,E,V]),t.useLayoutEffect(()=>{"mountPending"!==E&&"unmountPending"!==E||(w.current=setTimeout(()=>null==g?void 0:g({value:"mountPending"===E}),I))},[E,I,g]);const q={onFocus:e=>{(e.eventPhase===Event.AT_TARGET||e.eventPhase===Event.BUBBLING_PHASE&&T)&&(D.current=e.target)}};let $;if(v)$=l.mergeProps(U,q);else{const e=Object.assign({"aria-describedby":B,onMouseEnter:e=>{(e.eventPhase===Event.AT_TARGET||e.eventPhase===Event.BUBBLING_PHASE&&T)&&(D.current=e.target)}},k&&{onMouseLeave:()=>{"mounting"!==E&&M()},onMouseMove:e=>{(e.eventPhase===Event.AT_TARGET||e.eventPhase===Event.BUBBLING_PHASE&&T)&&(e=>{var t;if("unmounted"!==E&&("datatip"!==c||"mounted"!==E))return;const n=null===(t=null==D?void 0:D.current)||void 0===t?void 0:t.getBoundingClientRect(),o=document.body.scrollLeft+((null==n?void 0:n.left)||0)+((null==n?void 0:n.width)||0),s=document.body.scrollTop+((null==n?void 0:n.top)||0)+((null==n?void 0:n.height)||0),i="pointer"===p.x?e.clientX:o,u="pointer"===p.y?e.clientY:s;"mounted"===E?(L.current={x:i,y:u},!0!==P&&x(!0)):"unmounted"===E&&(M(),w.current=setTimeout(()=>{"unmounted"===E&&(L.current={x:i,y:u},null==g||g({value:!0}))},I))})(e)}});$=l.mergeProps(y,U,N,q,e)}if(v)return M(),{tooltipContent:null,tooltipProps:$};const X=(e=>{let t="bottom";switch(e){case"top":case"end":case"bottom":case"start":t=e;break;case"top-end":t="top-end-corner";break;case"bottom-end":t="bottom-end-corner";break;case"bottom-start":t="bottom-start-corner";break;case"top-start":t="top-start-corner"}return t})(d),Y=n.jsx(i.Layer,Object.assign({logicalParentRef:D},{children:n.jsx(h.Floating,Object.assign({anchorRef:C,placement:X,offsetValue:f},{children:n.jsx(j,Object.assign({isOpen:["mounting","mounted","unmountPending"].includes(E)},O,{isDatatip:T,onTransitionEnd:()=>{"mounting"===E&&A("mounted"),"unmounting"===E&&A("unmounted")}},{children:e}))}))}));return{tooltipContent:!["unmounted","mountPending"].includes(E)&&Y,tooltipProps:$}});e.useTooltip=({text:e,position:n="bottom",isDisabled:o=!1,anchor:s={x:"element",y:"element"},offset:i={mainAxis:0,crossAxis:0},variant:u="tooltip"})=>{const[r,a]=t.useState(!1),l=o||!e,{tooltipContent:c,tooltipProps:d}=O({text:e,isOpen:r,position:n,isDisabled:l,offset:i,anchor:s,variant:u,onToggle:({value:e})=>a(e)});return{tooltipContent:c,tooltipProps:d}},e.useTooltipControlled=O,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=UNSAFE_useTooltip.js.map
