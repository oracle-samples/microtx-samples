define("oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText",["require","exports","preact/hooks"],(function(require,e,t){"use strict";function a(e,t,a,n,s){return(null==e?void 0:e.instruction)||("none"===(null==s?void 0:s.validatorHint)?void 0:t)||(null==a?void 0:a.definition)||("none"===(null==s?void 0:s.converterHint)?void 0:n)}function n(e){if(!e.length)return;return e.map((e=>"function"==typeof e.getHint?e.getHint():void 0)).filter(Boolean).join("\n")}Object.defineProperty(e,"__esModule",{value:!0}),e.useAssistiveText=void 0,e.useAssistiveText=function({addBusyState:e,converter:s,displayOptions:r,help:i,helpHints:l,validators:o}){var u,c;const[d,f]=(0,t.useState)(o&&o.length?n(o):void 0),v=(0,t.useRef)();return(0,t.useEffect)((()=>{if(!o||!o.length)return void f(void 0);f(n(o));const t=o.map((e=>e.hint)).filter(Boolean),a=v.current=Symbol(),s=null==e?void 0:e("resolving the async validator hints");Promise.allSettled(t).then((e=>{f((t=>{const n=e.map((e=>"fulfilled"===e.status?e.value:void 0)).filter(Boolean);return a===v.current&&n.length?[t,...n].join("\n"):t})),null==s||s()}))}),[o]),{assistiveText:a(i,d,l,null!==(c=null===(u=null==s?void 0:s.getHint)||void 0===u?void 0:u.call(s))&&void 0!==c?c:void 0,r),helpSourceLink:null==l?void 0:l.source,helpSourceText:null==l?void 0:l.sourceText}}})),define("oj-c/editable-value/utils/utils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isShallowEqual=e.normalizeValue=e.treatNull=e.createMessageFromError=void 0,e.createMessageFromError=function(e){return"function"==typeof e.getMessage?{severity:"error",detail:e.getMessage().detail}:{severity:"error",detail:e.message}},e.treatNull=function(e,t){return null===e?t:e},e.normalizeValue=function(e){return"string"==typeof e&&""===e?null:e};e.isShallowEqual=(e,t)=>e===t||e.length===t.length&&e.every(((e,a)=>e===t[a]))})),define("oj-c/editable-value/UNSAFE_useComponentMessaging/useComponentMessaging",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks","../utils/utils"],(function(require,e,t,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useComponentMessaging=void 0,e.useComponentMessaging=function({messagesCustom:e=[],onMessagesCustomChanged:s}){const[r,i]=(0,t.useUncontrolledState)(e,s),[l,o]=(0,a.useState)([]),[u,c]=(0,a.useState)([]),d=(0,a.useRef)(e),f=(0,a.useCallback)(((...e)=>{o((t=>[...t,...e]))}),[]),v=(0,a.useCallback)((e=>{o((t=>[...t,e]))}),[]),p=(0,a.useCallback)((()=>{o([]),c([])}),[]),y=(0,a.useCallback)((()=>{c([])}),[]),m=(0,a.useCallback)((()=>{o([]),c([]),i([])}),[]),g=(0,a.useCallback)((()=>r.some((e=>"error"===e.severity))),[r]),h=(0,a.useCallback)((()=>0===l.length&&0===u.length&&!1===g()),[l,u,g]),V=(0,a.useCallback)((()=>0!==u.length),[u]),S=(0,a.useCallback)((()=>{o((e=>[...e,...u])),c([])}),[u]);return(0,a.useEffect)((()=>{d.current!==e&&(d.current=e,(0,n.isShallowEqual)(r,e)||i(e))}),[r,e]),(0,a.useMemo)((()=>({componentMessages:l,deferredComponentMessages:u,messagesCustom:r,visibleMessages:[...r,...l],addComponentMessage:f,addDeferredComponentMessage:v,clearAllComponentMessages:p,clearAllMessages:m,clearDeferredComponentMessages:y,hasCustomErrorMessages:g,hasHiddenMessages:V,hasNoErrorMessages:h,setComponentMessages:o,setDeferredComponentMessages:c,showHiddenMessages:S})),[l,u,r,g,V,h,S])}})),define("oj-c/editable-value/UNSAFE_useConverter/useConverter",["require","exports","ojs/ojconverter-nativenumber","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","../utils/utils"],(function(require,e,t,a,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useConverter=e.ConverterErrorSymbol=void 0,e.ConverterErrorSymbol=Symbol("ConverterError"),e.useConverter=function({componentMessagingState:r,validationState:i,converter:l}){const o=(0,n.useTranslationBundle)("@oracle/oraclejet-preact").inputNumber_converterParseError(),u=(0,a.useCallback)((a=>{if(!l||(""===(n=a)||null===n))return a;var n;try{return l.parse(a)}catch(a){const n=(null==a?void 0:a.cause)===t.USER_INPUT_ERROR?{severity:"error",detail:o}:(0,s.createMessageFromError)(a);return r.setComponentMessages([n]),i.setValid("invalidShown"),e.ConverterErrorSymbol}}),[l,r,i]),c=(0,a.useCallback)(((e,t=!1)=>{var a;if(!l||function(e){return null===e}(e))return null!==(a=(0,s.treatNull)(e,""))&&void 0!==a?a:"";try{return l.format(e)}catch(a){return t||(r.setComponentMessages([(0,s.createMessageFromError)(a)]),i.setValid("invalidShown")),(0,s.treatNull)(e,"")}}),[l,r,i]);return(0,a.useMemo)((()=>({format:c,parse:u})),[c,u])}})),define("oj-c/editable-value/UNSAFE_useConverterLifecycle/useConverterLifecycle",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useConverterLifecycle=void 0,e.useConverterLifecycle=function({converter:e,validationState:a,refreshDisplayValue:n,runFullValidationAndUpdateValue:s}){const r=(0,t.useRef)(e);(0,t.useEffect)((()=>{if(r.current===e)return;r.current=e;const{valid:t}=a;if("invalidShown"===t)s();else n()}),[e,a,n,s])}}));var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators",["require","exports","ojs/ojvalidator-required","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDeferredValidators=void 0,t=__importDefault(t),e.useDeferredValidators=function({labelHint:e,required:n,requiredMessageDetail:s}){const r=(0,a.useMemo)((()=>n?new t.default({label:e,messageDetail:s}):null),[n]);return(0,a.useMemo)((()=>[r].filter(Boolean)),[r])}})),define("oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useStaleIdentity=void 0,e.useStaleIdentity=function(){const e=(0,t.useRef)(new Map);return{setStaleIdentity:(0,t.useCallback)((t=>{const a=Symbol();return e.current.set(t,a),{isStale:()=>a!==e.current.get(t)}}),[])}}}));var __awaiter=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(s,r){function i(e){try{o(n.next(e))}catch(e){r(e)}}function l(e){try{o(n.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}o((n=n.apply(e,t||[])).next())}))};define("oj-c/editable-value/UNSAFE_useValidators/useValidators",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks","../UNSAFE_useStaleIdentity/useStaleIdentity","../utils/utils"],(function(require,e,t,a,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValidators=e.ValidationResult=void 0,e.ValidationResult={VALID:"VALID",INVALID:"INVALID",STALE:"STALE"},e.useValidators=function({componentMessagingState:r,defaultValidState:i,deferredValidators:l=[],validators:o=[],addBusyState:u,onValidChanged:c}){const[d,f]=(0,t.useUncontrolledState)(i,c),{setStaleIdentity:v}=(0,n.useStaleIdentity)();(0,a.useLayoutEffect)((()=>{void 0!==i&&(null==c||c(i))}),[]);const p=(0,a.useCallback)(((e,t={})=>__awaiter(this,void 0,void 0,(function*(){const{addComponentMessage:a,clearAllComponentMessages:n,clearAllMessages:i,hasCustomErrorMessages:c,setComponentMessages:d}=r,{doNotClearMessagesCustom:p=!1}=t,y=c();if(f("pending"),p?n():i(),0===o.length&&0===l.length)return f(y&&p?"invalidShown":"valid"),!0;const m=[],g=[];for(const t of[...l,...o])try{const a=t.validate(e);a instanceof Promise&&g.push(a.then((()=>{}),(e=>(0,s.createMessageFromError)(e))))}catch(e){m.push((0,s.createMessageFromError)(e))}if(!m.length&&!g.length)return f(y&&p?"invalidShown":"valid"),!0;const h=0!==m.length;if(h&&(d(m),f("invalidShown")),!g.length)return!h;const V=null==u?void 0:u("running validation"),{isStale:S}=v("useValidators-validate");let b=!1;for(const e of g){const t=yield e;t&&!S()&&(a(t),f("invalidShown"),b=!0)}return h||b||S()||f(y&&p?"invalidShown":"valid"),null==V||V(),!h&&!b}))),[r,l,o]),y=(0,a.useCallback)((e=>{const t=[];for(const a of l)try{a.validate(e)}catch(e){t.push((0,s.createMessageFromError)(e))}if(t.length)return t}),[l]),m=(0,a.useCallback)(((t,a={})=>__awaiter(this,void 0,void 0,(function*(){const{isStale:n}=v("useValidationLifeCycle-validateValueOnInternalChange"),s=null==u?void 0:u("running validateValueOnInternalChange"),r=yield p(t,a);return null==s||s(),n()?e.ValidationResult.STALE:r?e.ValidationResult.VALID:e.ValidationResult.INVALID}))),[u,p]),g=(0,a.useCallback)((t=>{const{clearAllMessages:a,setDeferredComponentMessages:n}=r;a();const s=y(t);return s?(n(s),f("invalidHidden")):f("valid"),e.ValidationResult.VALID}),[r,y]);return(0,a.useMemo)((()=>({valid:d,setValid:f,deferredValidate:y,fullValidate:p,validateValueOnExternalChange:g,validateValueOnInternalChange:m})),[d,y,p,g,m])}}));__awaiter=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(s,r){function i(e){try{o(n.next(e))}catch(e){r(e)}}function l(e){try{o(n.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}o((n=n.apply(e,t||[])).next())}))};define("oj-c/editable-value/UNSAFE_useValidationLifecycle/useValidationLifecycle",["require","exports","preact/hooks","../UNSAFE_useConverter/useConverter","../UNSAFE_useValidators/useValidators","../utils/utils"],(function(require,e,t,a,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValidationLifecycle=void 0,e.useValidationLifecycle=function({componentMessagingState:e,deferredValidators:r,validationState:i,validators:l,getValueForValidation:o,setValueAfterValidation:u}){const c=(0,t.useRef)(r),d=(0,t.useRef)(l),f=(0,t.useRef)(e.messagesCustom),v=(0,t.useCallback)((()=>__awaiter(this,void 0,void 0,(function*(){const{valid:e,validateValueOnInternalChange:t}=i,s=o(e);if(s===a.ConverterErrorSymbol)return;(yield t(s,{doNotClearMessagesCustom:!0}))===n.ValidationResult.VALID&&u(s)}))),[i,o,u]);return(0,t.useEffect)((()=>{const t=o("valid");if(t===a.ConverterErrorSymbol)return;const{deferredValidate:n,setValid:s}=i,{hasCustomErrorMessages:r,setDeferredComponentMessages:l}=e,u=n(t);u&&(l(u),s("invalidHidden")),r()&&s("invalidShown")}),[]),(0,t.useEffect)((()=>{if(c.current===r)return;const{valid:t,deferredValidate:n,setValid:s}=i,{clearDeferredComponentMessages:l,setDeferredComponentMessages:u}=e;switch(c.current=r,t){case"valid":const e=o(t);if(e!==a.ConverterErrorSymbol){const t=n(e);t&&(u(t),s("invalidHidden"))}break;case"invalidHidden":0===r.length&&(s("valid"),l());break;case"invalidShown":v()}}),[r,e,i,o,v]),(0,t.useEffect)((()=>{if(d.current!==l&&(d.current=l,"invalidShown"===i.valid))v()}),[l,i]),(0,t.useEffect)((()=>{if((0,s.isShallowEqual)(f.current,e.messagesCustom))return;const{messagesCustom:t,hasCustomErrorMessages:a,hasHiddenMessages:n,hasNoErrorMessages:r}=e,{valid:l,setValid:o}=i;if(f.current=t,a())o("invalidShown");else{if("pending"===l)return;r()?o("valid"):n()&&o("invalidHidden")}}),[e,i]),{runFullValidationAndUpdateValue:v}}})),define("oj-c/editable-value/UNSAFE_useValue/useValue",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks","../utils/utils"],(function(require,e,t,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValue=void 0,e.useValue=function({value:e,format:s,parse:r,onRawValueChanged:i,onTransientValueChanged:l,onValueChanged:o}){const[u,c]=(0,t.useUncontrolledState)(s(e,!0),i),[d,f]=(0,t.useUncontrolledState)(e,o);(0,a.useEffect)((()=>{void 0!==u&&(null==i||i(u))}),[]);const[v,p]=(0,t.useUncontrolledState)(e,l);return(0,a.useEffect)((()=>{void 0!==e&&(null==l||l(e))}),[]),{displayValue:u,transientValue:v,value:d,getValueForValidation:(0,a.useCallback)((e=>"invalidShown"!==e?d:r((0,n.normalizeValue)(u))),[u,d,r]),setValueAfterValidation:(0,a.useCallback)((e=>{f(e),c(s(e))}),[s]),setDisplayValue:c,setTransientValue:p,setValue:f,refreshDisplayValue:(0,a.useCallback)((()=>{c(s(d))}),[d,s])}}})),define("oj-c/editable-value/UNSAFE_useValueLifecycle/useValueLifecycle",["require","exports","preact/hooks","../UNSAFE_useValidators/useValidators"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValueLifecycle=void 0,e.useValueLifecycle=function({value:e,valueState:n,format:s,validateValueOnExternalChange:r}){const i=(0,t.useRef)(e);(0,t.useEffect)((()=>{const{value:e,setDisplayValue:t}=n;t(s(e))}),[]),(0,t.useEffect)((()=>{if(i.current!==e&&(i.current=e,void 0!==e&&e!==n.value)){const{setDisplayValue:t,setValue:i}=n;r(e)===a.ValidationResult.VALID&&(i(e),t(s(e)))}}),[e,n,s])}}));__awaiter=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(s,r){function i(e){try{o(n.next(e))}catch(e){r(e)}}function l(e){try{o(n.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}o((n=n.apply(e,t||[])).next())}))};define("oj-c/editable-value/UNSAFE_useEditableValue/useEditableValue",["require","exports","preact/hooks","../UNSAFE_useComponentMessaging/useComponentMessaging","../UNSAFE_useConverter/useConverter","../UNSAFE_useConverterLifecycle/useConverterLifecycle","../UNSAFE_useDeferredValidators/useDeferredValidators","../UNSAFE_useValidationLifecycle/useValidationLifecycle","../UNSAFE_useValidators/useValidators","../UNSAFE_useValue/useValue","../UNSAFE_useValueLifecycle/useValueLifecycle","../utils/utils"],(function(require,e,t,a,n,s,r,i,l,o,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=void 0,e.useEditableValue=function({ariaDescribedBy:e,converter:d,displayOptions:f,implicitComponentValidator:v,labelHint:p,messagesCustom:y,required:m,requiredMessageDetail:g,shouldNormalizeValueOnCommit:h=!0,validators:V,value:S,addBusyState:b,onMessagesCustomChanged:_,onRawValueChanged:C,onValidChanged:E,onValueChanged:A,onTransientValueChanged:M,wrapValueState:j}){const L=(0,a.useComponentMessaging)({messagesCustom:y,onMessagesCustomChanged:_}),{clearAllMessages:D,visibleMessages:F}=L,U=(0,r.useDeferredValidators)({labelHint:p,required:m,requiredMessageDetail:g}),w=v?V?[v,...V]:[v]:V,x=(0,l.useValidators)({componentMessagingState:L,defaultValidState:"valid",deferredValidators:U,validators:w,addBusyState:b,onValidChanged:E}),{validateValueOnExternalChange:k,validateValueOnInternalChange:I}=x,{format:P,parse:R}=(0,n.useConverter)({componentMessagingState:L,converter:d,validationState:x}),O=(0,o.useValue)({value:S,format:P,parse:R,onRawValueChanged:C,onTransientValueChanged:M,onValueChanged:A}),T=j?j(O):O,{displayValue:N,value:q,getValueForValidation:B,setValueAfterValidation:H,refreshDisplayValue:W,setDisplayValue:z,setTransientValue:K,setValue:$}=T,{runFullValidationAndUpdateValue:X}=(0,i.useValidationLifecycle)({componentMessagingState:L,validationState:x,deferredValidators:U,validators:V,getValueForValidation:B,setValueAfterValidation:H});(0,s.useConverterLifecycle)({converter:d,validationState:x,refreshDisplayValue:W,runFullValidationAndUpdateValue:X}),(0,u.useValueLifecycle)({value:S,valueState:T,format:P,validateValueOnExternalChange:k});const G=(0,t.useCallback)((e=>R(h?(0,c.normalizeValue)(e):e)),[h,R]),Y=(0,t.useCallback)(((e,t=!0)=>__awaiter(this,void 0,void 0,(function*(){const a=yield I(e);return a===l.ValidationResult.VALID&&t&&$(e),a}))),[I]),J=(0,t.useCallback)((({value:e})=>__awaiter(this,void 0,void 0,(function*(){const t=G(e);if(t===n.ConverterErrorSymbol)return;const a=t;(yield Y(a))===l.ValidationResult.VALID&&z(P(a))}))),[P,Y,G]),Q=(0,t.useCallback)((({value:e})=>{z(null!=e?e:"")}),[]),Z=(0,t.useCallback)((()=>{D(),k(q),W()}),[q,D,W,k]),ee=(0,t.useCallback)((()=>__awaiter(this,void 0,void 0,(function*(){const{fullValidate:e}=x,{displayValue:t,value:a,setValueAfterValidation:s}=T,r=G(t);if(r===n.ConverterErrorSymbol)return"invalid";const i=r,l=null==b?void 0:b("running component method validate"),o=yield e(i);return null==l||l(),o?(i!==a&&s(i),"valid"):"invalid"}))),[x,T,b,G]),te=(0,t.useCallback)((()=>{const{hasHiddenMessages:e,showHiddenMessages:t}=L,{setValid:a}=x;e()&&(t(),a("invalidShown"))}),[L,x]);return{value:q,setValue:$,displayValue:N,setDisplayValue:z,setTransientValue:K,methods:{reset:Z,validate:ee,showMessages:te},textFieldProps:{messages:"none"!==(null==f?void 0:f.messages)?F:void 0,value:N,ariaDescribedBy:e,onCommit:J,onInput:Q},onCommitValue:Y,format:P,normalizeAndParseValue:G}}}));__awaiter=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(s,r){function i(e){try{o(n.next(e))}catch(e){r(e)}}function l(e){try{o(n.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}o((n=n.apply(e,t||[])).next())}))};define("oj-c/hooks/UNSAFE_useListData/useListData",["require","exports","ojs/ojdataproviderfactory","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useListData=void 0;const n=Object.freeze({status:"loading",data:null}),s={isInitialFetchDeferred:!1};e.useListData=(e,t=s)=>{const o=(0,a.useRef)(null),f=(0,a.useRef)(0),v=(0,a.useRef)(!1),p=(0,a.useRef)(null),y=t.fetchSize&&t.fetchSize>0?t.fetchSize:25;if(!e){return[u("exact"),e=>Promise.resolve()]}const m=(0,a.useMemo)((()=>r(e)),[e]),[g,h]=(0,a.useReducer)(i,n),V=(0,a.useCallback)((e=>__awaiter(void 0,void 0,void 0,(function*(){const a={attributes:t.attributes,sortCriteria:t.sortCriteria,filterCriterion:t.filterCriterion,offset:e.offset,size:e.count};try{const t=(yield m.fetchByOffset(a)).results,n=!0===v.current?"exact":"atLeast";h({status:"success",data:{offset:e.offset,data:t,totalSize:f.current,sizePrecision:n}})}catch(e){h({status:"error",error:e})}}))),[m,t.attributes,t.filterCriterion,t.sortCriteria]),S=(0,a.useCallback)((()=>__awaiter(void 0,void 0,void 0,(function*(){h({status:"loading",data:null});const e=m.fetchFirst({attributes:t.attributes,sortCriteria:t.sortCriteria,filterCriterion:t.filterCriterion,size:y})[Symbol.asyncIterator]();p.current=e;try{const a=yield e.next();f.current=a.value.data.length,void 0!==a.done&&(v.current=a.done);const n=t.initialRowsFetched&&t.initialRowsFetched>0?t.initialRowsFetched:y;V({offset:0,count:Math.min(f.current,n)})}catch(e){h({status:"error",error:e}),p.current=null}}))),[m,V,t.attributes,t.filterCriterion,t.sortCriteria,t.fetchSize]),b=(0,a.useCallback)((e=>__awaiter(void 0,void 0,void 0,(function*(){if(null===p.current)S();else{const t=e.offset+e.count;if(t>f.current){if(null==o.current){const a=l(p,f.current,t);o.current=a;try{const t=yield a;void 0!==t.done&&(v.current=t.done);const n=t.total;n>0&&(f.current=n,V({offset:e.offset,count:Math.min(f.current-e.offset,e.count)})),o.current=null}catch(e){h({status:"error",error:e}),o.current=null}}}else V(e)}}))),[g,S,V]),_=(0,a.useCallback)((()=>{p.current=null,o.current=null,f.current=0,v.current=!1,0===t.initialRowsFetched?h(u("atLeast")):t.isInitialFetchDeferred?h({status:"loading",data:null}):S()}),[S,t.isInitialFetchDeferred,t.initialRowsFetched]);(0,a.useEffect)((()=>{_()}),[_]);const C=(0,a.useCallback)((e=>{if("success"===g.status&&g.data){const a=g.data;let n=!1;if(e.detail.add){const s=c(e.detail.add,a,t,!0);f.current=f.current+s,n=s>0||"exact"===a.sizePrecision,0===s&&(v.current=!1)}if(e.detail.remove){const s=c(e.detail.remove,a,t,!1);f.current=f.current-s,n=n||s>0}e.detail.update&&(n=n||d(e.detail.update,a,t)),n&&V({offset:a.offset,count:a.data.length})}}),[g,t,V]),E=(0,a.useCallback)((e=>{var t;let a=-1;const n=null===(t=e.detail)||void 0===t?void 0:t.disregardAfterKey;if(n&&"success"===g.status){const e=g.data.data.findIndex((e=>e.metadata.key===n));if(e>-1&&(a=g.data.data.length-e-1),0===a&&g.data.data.length>=y)return}a>-1&&"success"===g.status?(f.current=f.current-a,b({offset:g.data.offset,count:Math.max(g.data.data.length,y)})):_()}),[g,_]);return(0,a.useEffect)((()=>(m.addEventListener("refresh",E),m.addEventListener("mutate",C),()=>{m.removeEventListener("refresh",E),m.removeEventListener("mutate",C)})),[m,_,C]),[g,b]};const r=e=>(0,t.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}}),i=(e,t)=>e.status===t.status&&"loading"===t.status?e:t,l=(e,t,a)=>__awaiter(void 0,void 0,void 0,(function*(){return yield o(e,t,a)})),o=(e,t,a)=>__awaiter(void 0,void 0,void 0,(function*(){const n=e.current;if(null===n)return{total:-1,done:void 0};const s=yield n.next();return n===e.current?(t+=s.value.data.length)>=a||s.done?{total:t,done:s.done}:o(e,t,a):{total:-1,done:void 0}})),u=e=>({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:e}}),c=(e,t,a,n)=>{var s;let r=0;if(f(e,a)){const a=n?null===(s=e.indexes)||void 0===s?void 0:s.sort():e.indexes;let i=t.totalSize-1;null==a||a.forEach((e=>{e<=i&&(r=r+=1,n&&(i=i+=1))}))}return r},d=(e,t,a)=>{if(f(e,a)){const a=e.indexes?e.indexes:[],n=t.offset,s=n+t.data.length;for(let e=0;e<a.length;e++)if(a[e]>=n&&a[e]<s)return!0}return!1},f=(e,t)=>e.indexes&&null==t.sortCriteria&&null==t.filterCriterion})),define("oj-c/select-common/utils/utils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=e.DEFAULT_VALUE_ITEMS=e.DEFAULT_VALUE_ITEM=e.DEFAULT_VALUE=e.DEFAULT_ITEM_CONTEXT=void 0,e.DEFAULT_ITEM_CONTEXT=null,e.DEFAULT_VALUE=null,e.DEFAULT_VALUE_ITEM=null,e.DEFAULT_VALUE_ITEMS=null,e.isEmpty=function(e){return!e||(Array.isArray(e)?0===e.length:(e instanceof Set||e instanceof Map)&&0===e.size)}})),define("oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","preact/hooks","../utils/utils"],(function(require,e,t,a,n){"use strict";function s(e){return e instanceof Set?new Set(e.values()):e}function r(e,t){return e instanceof Set&&t instanceof Set||e instanceof Map&&t instanceof Map?e.size===t.size:"object"==typeof e&&"object"==typeof t?e.key===t.key:e===t}function i(e,t){return e instanceof Set?e.has(t):null!=e&&e===t}function l(e,t){return e instanceof Set||e instanceof Map?(e.delete(t),e):"number"==typeof e||"string"==typeof e?e===t?n.DEFAULT_VALUE:e:"object"==typeof e&&e.key===t?n.DEFAULT_VALUE_ITEMS:e}Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProviderListeners=void 0,e.useDataProviderListeners=function({dataProvider:e,setValue:o,setValueToSync:u,setValueItemsToSync:c,value:d,valueItems:f}){const v=d instanceof Set,p=(0,a.useCallback)((()=>{(0,n.isEmpty)(d)||(u(s(d)),c(n.DEFAULT_VALUE_ITEMS))}),[d]),y=(0,a.useCallback)((e=>{if((0,n.isEmpty)(d))return;let a=s(d);if(null!=e.detail.remove){e.detail.remove.keys.forEach((e=>{i(a,e)&&(a=l(a,e),t.Logger.warn(`\n              ${v?"SelectMultiple":"SelectSingle"}: selected value removed from data provider: ${e}`))})),r(a,d)&&(o((0,n.isEmpty)(a)?n.DEFAULT_VALUE:a),u((0,n.isEmpty)(a)?n.DEFAULT_VALUE:a))}var p;if(!(0,n.isEmpty)(a)&&null!=e.detail.update){const t=e.detail.update.keys;let s=(0,n.isEmpty)(f)?f:(p=f)instanceof Map?new Map(p.entries()):Object.assign({},p);t.forEach((e=>{i(a,e)&&(s=l(s,e))})),r(s,f)&&(u(a),c((0,n.isEmpty)(s)?n.DEFAULT_VALUE_ITEMS:s))}}),[d,f]);(0,a.useEffect)((()=>(null==e||e.addEventListener("refresh",p),null==e||e.addEventListener("mutate",y),()=>{null==e||e.removeEventListener("refresh",p),null==e||e.removeEventListener("mutate",y)})),[e,y,p])}})),define("oj-c/select-common/UNSAFE_useWrapDataProvider/useWrapDataProvider",["require","exports","ojs/ojdataproviderfactory","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=void 0,e.useWrapDataProvider=function(e){return(0,a.useMemo)((()=>e?(0,t.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}}):e),[e])}})),define("oj-c/select-common/UNSAFE_useWrapValueState/useWrapValueState",["require","exports","preact/hooks","../utils/utils"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapValueState=void 0,e.useWrapValueState=function({arItemContexts:e,isLoading:n,preactValueItems:s,setPreactValueItems:r}){const i=(0,t.useCallback)((e=>t=>"invalidShown"!==t||n?e:(0,a.isEmpty)(s)?null:e),[n,s]),l=(0,t.useCallback)((()=>{r(e)}),[e]);return{wrapValueState:(0,t.useCallback)((e=>Object.assign(Object.assign({},e),{getValueForValidation:i(e.value),refreshDisplayValue:l})),[i,l])}}}));__awaiter=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(s,r){function i(e){try{o(n.next(e))}catch(e){r(e)}}function l(e){try{o(n.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}o((n=n.apply(e,t||[])).next())}))};define("oj-c/select-single/useSyncValueAndValueItem",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","oj-c/select-common/utils/utils","preact/hooks"],(function(require,e,t,a,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSyncValueAndValueItem=void 0,e.useSyncValueAndValueItem=function({addBusyState:e,dataProvider:r,setIsLoading:i,setValue:l,setValueItem:o,value:u,valueItem:c}){const d=(0,s.useRef)(u),f=(0,s.useRef)(c),{setStaleIdentity:v}=(0,a.useStaleIdentity)(),p=null!=u,y=null!=c,m=(0,s.useCallback)((()=>__awaiter(this,void 0,void 0,(function*(){if(!p)return void(y&&o(n.DEFAULT_VALUE_ITEM));if(null!=u&&null!=c&&c.key===u)return void o(Object.assign({},c));if(!r)return;i(!0);const a=e("useSyncValueItem: calling fetchByKeys"),{isStale:s}=v("useSyncValueItem:fetchByKeys");try{const e=yield r.fetchByKeys({keys:new Set([u])});if(!s()){const t=function(e,t,a){if(t&&t.key===e)return t;const n=a.get(e);if(!n)throw new Error(`oj-c-select-single: could not fetch data for key ${e}`);return{key:e,data:n.data,metadata:n.metadata?n.metadata:{key:e}}}(u,c,e.results);o(t)}}catch(e){s()||t.Logger.error(`SelectMultiple: fetchByKeys promise rejected: ${e}`)}s()||i(!1),a()}))),[r,p,y,u,c]),g=(0,s.useCallback)((()=>{y?c.key===u||l(c.key):p&&l(n.DEFAULT_VALUE)}),[p,y,u,c]);(0,s.useEffect)((()=>{p?m():y&&g()}),[]),(0,s.useEffect)((()=>{u!==d.current&&c!==f.current?(d.current=u,f.current=c,u?m():g()):u!==d.current?(d.current=u,m()):c!==f.current&&(f.current=c,g())}),[u,c])}})),define("oj-c/select-single/useValueItem",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValueItem=void 0,e.useValueItem=function(e,n){const[s,r]=(0,t.useUncontrolledState)(e,n);return(0,a.useEffect)((()=>{s!==e&&r(e)}),[e]),{valueItem:s,setValueItem:r}}}));__awaiter=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(s,r){function i(e){try{o(n.next(e))}catch(e){r(e)}}function l(e){try{o(n.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}o((n=n.apply(e,t||[])).next())}))};var __rest=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};define("oj-c/select-single/useSelectSinglePreact",["require","exports","oj-c/editable-value/UNSAFE_useEditableValue/useEditableValue","oj-c/editable-value/UNSAFE_useValidators/useValidators","oj-c/editable-value/utils/utils","oj-c/hooks/UNSAFE_useListData/useListData","oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners","oj-c/select-common/UNSAFE_useWrapDataProvider/useWrapDataProvider","oj-c/select-common/UNSAFE_useWrapValueState/useWrapValueState","oj-c/select-common/utils/utils","ojs/ojdataprovider","preact/hooks","./useSyncValueAndValueItem","./useValueItem"],(function(require,e,t,a,n,s,r,i,l,o,u,c,d,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectSinglePreact=void 0,e.useSelectSinglePreact=function(e,v){var{data:p,disabled:y,displayOptions:m,itemText:g,labelEdge:h,labelHint:V,labelStartWidth:S,messagesCustom:b,placeholder:_,readonly:C,required:E,textAlign:A,userAssistanceDensity:M,value:j,valueItem:L,virtualKeyboard:D,onMessagesCustomChanged:F,onOjValueAction:U,onValidChanged:w,onValueChanged:x,onValueItemChanged:k}=e,I=__rest(e,["data","disabled","displayOptions","itemText","labelEdge","labelHint","labelStartWidth","messagesCustom","placeholder","readonly","required","textAlign","userAssistanceDensity","value","valueItem","virtualKeyboard","onMessagesCustomChanged","onOjValueAction","onValidChanged","onValueChanged","onValueItemChanged"]);const[P,R]=(0,c.useState)(void 0),[O,T]=(0,c.useState)(!1),{valueItem:N,setValueItem:q}=(0,f.useValueItem)(L,k),[B,H]=(0,c.useState)(N);(0,c.useEffect)((()=>{H(N)}),[N]);const{wrapValueState:W}=(0,l.useWrapValueState)({arItemContexts:N,isLoading:O,preactValueItems:B,setPreactValueItems:H}),{methods:z,onCommitValue:K,setValue:$,textFieldProps:X,value:G}=(0,t.useEditableValue)({ariaDescribedBy:I["aria-describedby"],displayOptions:m,messagesCustom:b,required:E,value:j,addBusyState:v,onMessagesCustomChanged:F,onValidChanged:w,onValueChanged:x,wrapValueState:W}),{ariaDescribedBy:Y,messages:J}=X,Q=null===G,Z=(0,i.useWrapDataProvider)(p),[ee,te]=(0,c.useState)(G),[ae,ne]=(0,c.useState)(N);(0,c.useEffect)((()=>{te(G)}),[G]),(0,c.useEffect)((()=>{ne(N)}),[N]),(0,r.useDataProviderListeners)({dataProvider:Z,setValue:$,setValueToSync:te,setValueItemsToSync:ne,value:G,valueItems:N}),(0,d.useSyncValueAndValueItem)({addBusyState:v,dataProvider:Z,setIsLoading:T,setValue:$,setValueItem:q,value:ee,valueItem:ae});const[se,re]=(0,s.useListData)(Z,{filterCriterion:P,initialRowsFetched:0}),ie=(0,c.useCallback)((({previousValue:e,value:t})=>__awaiter(this,void 0,void 0,(function*(){const n=yield K(null!=t?t:o.DEFAULT_VALUE);if(n===a.ValidationResult.INVALID)H(void 0);else if(n===a.ValidationResult.VALID&&"success"===se.status)if(null==t)null==U||U({itemContext:o.DEFAULT_ITEM_CONTEXT,previousValue:null!=e?e:o.DEFAULT_VALUE,value:o.DEFAULT_VALUE});else if(t===(null==N?void 0:N.key))null==U||U({itemContext:N,previousValue:null!=e?e:o.DEFAULT_VALUE,value:t});else{let a=se.data.data.find((e=>e.metadata.key===t));if(void 0===a){a=(yield Z.fetchByKeys({keys:new Set([t])})).results.get(t)}const n={data:a.data,key:a.metadata.key,metadata:a.metadata};null==U||U({itemContext:n,previousValue:null!=e?e:o.DEFAULT_VALUE,value:null!=t?t:o.DEFAULT_VALUE})}}))),[Z,se,N,K,U]),le=(0,c.useCallback)((({searchText:e})=>{const t=e&&e.length>0?u.FilterFactory.getFilter({filterDef:{text:e}}):void 0;R(t)}),[]);return{methods:z,selectSingleProps:{ariaDescribedBy:Y,data:se.data,isDisabled:y,isLoading:O,isReadonly:C,isRequired:E,isRequiredShown:E&&Q,itemText:g,label:V,labelEdge:h,labelStartWidth:S,messages:J,onCommit:ie,onFilter:le,onLoadRange:re,placeholder:_,textAlign:A,userAssistanceDensity:M,valueItem:(0,n.treatNull)(B,void 0),virtualKeyboard:D}}}}));var __decorate=this&&this.__decorate||function(e,t,a,n){var s,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,a,i):s(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}
;define("oj-c/select-single/select-single",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext","@oracle/oraclejet-preact/hooks/UNSAFE_useFormVariantContext","@oracle/oraclejet-preact/hooks/UNSAFE_useTabbableMode","@oracle/oraclejet-preact/UNSAFE_SelectSingle","oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText","ojs/ojcontext","ojs/ojvcomponent","ojs/ojvcomponent-binding","preact","preact/compat","preact/hooks","./useSelectSinglePreact","css!./select-single/select-single-styles.css"],(function(require,e,t,a,n,s,r,i,l,o,u,c,d,f,v,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectSingle=void 0,a=__importDefault(a),o=__importDefault(o);const y=(0,f.forwardRef)(((e,a)=>{const{busyContextRef:n,displayOptions:r,help:o,helpHints:u}=e,c=(0,v.useRef)(),d=(0,v.useCallback)((t=>{var a;return null===(a=n.current)||void 0===a?void 0:a.addBusyState({description:`oj-c-select-single id=${e.id}: ${t}`})}),[]),{selectSingleProps:f,methods:y}=(0,p.useSelectSinglePreact)(e,d);(0,v.useImperativeHandle)(a,(()=>Object.assign({blur:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.blur()},focus:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus()}},y)),[y]);const m=(0,l.useAssistiveText)({displayOptions:r,help:o,helpHints:u}),g=(0,s.useFormVariantContext)();return(0,t.jsx)(i.SelectSingle,Object.assign({ref:c},m,f,{variant:g}))}));let m=class extends d.Component{constructor(){super(...arguments),this.busyContextRef=(0,d.createRef)(),this.selectSingleRef=(0,d.createRef)(),this.rootRef=(0,d.createRef)()}componentDidMount(){this.busyContextRef.current=o.default.getContext(this.rootRef.current).getBusyContext()}render(e){const a={isFormLayout:void 0!==e.containerReadonly,isReadonly:e.containerReadonly,labelWrapping:e.labelWrapping};return(0,t.jsx)(u.Root,Object.assign({id:e.id,ref:this.rootRef},{children:(0,t.jsx)(n.FormContext.Provider,Object.assign({value:a},{children:(0,t.jsx)(y,Object.assign({busyContextRef:this.busyContextRef,ref:this.selectSingleRef},e))}))}))}componentWillUnmount(){this.busyContextRef.current=null}reset(){var e;null===(e=this.selectSingleRef.current)||void 0===e||e.reset()}showMessages(){var e;null===(e=this.selectSingleRef.current)||void 0===e||e.showMessages()}validate(){var e;return null===(e=this.selectSingleRef.current)||void 0===e?void 0:e.validate()}blur(){var e;null===(e=this.selectSingleRef.current)||void 0===e||e.blur()}focus(){var e;null===(e=this.selectSingleRef.current)||void 0===e||e.focus()}};m.defaultProps={data:null,disabled:!1,displayOptions:{messages:"display"},help:{instruction:""},helpHints:{definition:"",source:"",sourceText:void 0},messagesCustom:[],readonly:!1,required:!1,userAssistanceDensity:"reflow",value:null,valueItem:null,virtualKeyboard:"auto"},m._metadata={properties:{containerReadonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},data:{type:"object|null"},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["display","none"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"},sourceText:{type:"string"}}},itemText:{type:"string|number|function"},labelEdge:{type:"string",enumValues:["start","none","top","inside"],binding:{consume:{name:"containerLabelEdge"}}},labelHint:{type:"string"},labelStartWidth:{type:"string",binding:{consume:{name:"labelWidth"}}},labelWrapping:{type:"string",enumValues:["wrap","truncate"],binding:{consume:{name:"labelWrapping"}}},messagesCustom:{type:"Array<object>",writeback:!0},placeholder:{type:"string"},readonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},required:{type:"boolean"},requiredMessageDetail:{type:"string"},textAlign:{type:"string",enumValues:["start","right","end"]},userAssistanceDensity:{type:"string",enumValues:["reflow","efficient"],binding:{consume:{name:"containerUserAssistanceDensity"}}},value:{type:"any",writeback:!0},valueItem:{type:"object|null",properties:{data:{type:"any"},key:{type:"any"},metadata:{type:"object",properties:{indexFromParent:{type:"number"},isLeaf:{type:"boolean"},key:{type:"any"},message:{type:"object",properties:{detail:{type:"string"},severity:{type:"number|string",enumValues:["error","confirmation","info","warning","fatal"]},summary:{type:"string"}}},parentKey:{type:"any"},suggestion:{type:"object"},treeDepth:{type:"number"}}}},writeback:!0},virtualKeyboard:{type:"string",enumValues:["number","text","auto","search","email","tel","url"]},valid:{type:"string",enumValues:["valid","pending","invalidHidden","invalidShown"],readOnly:!0,writeback:!0}},events:{ojValueAction:{}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value","valueItem"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["aria-describedby","id"]},methods:{reset:{},showMessages:{},validate:{},blur:{},focus:{}}},m._translationBundleMap={"@oracle/oraclejet-preact":a.default},m._consumedContexts=[s.FormVariantContext,r.TabbableModeContext],m=__decorate([(0,u.customElement)("oj-c-select-single")],m),e.SelectSingle=m}));
//# sourceMappingURL=select-single.js.map