define(["exports","preact/jsx-runtime","preact/hooks","./hooks/PRIVATE_useMessagesFocusManager","./PRIVATE_Message","./UNSAFE_Flex","./UNSAFE_LiveRegion","./Flex-348d5a41","./MessagesManager-0c0f108c","./MessageUtils-66bef1fe",'module',"./utils/PRIVATE_timer","./utils/UNSAFE_classNames","./classNames-e842f86a","./MessageCloseButton-26d2a151","./UNSAFE_Button","./Button-097e23fc","./UNSAFE_BaseButton","./BaseButton-979c5061","./tslib.es6-42e4f430","./hooks/UNSAFE_usePress","./hooks/UNSAFE_useHover","./hooks/UNSAFE_useToggle","./hooks/UNSAFE_useActive","preact/compat","./utils/UNSAFE_interpolations/dimensions","./utils/UNSAFE_arrayUtils","./utils/UNSAFE_size","./_curry1-a2227576","./utils/UNSAFE_mergeInterpolations","./_curry3-3a3ba6d5","./_curry2-a4242d52","./_has-db711dd4","./utils/PRIVATE_clientHints","./clientHints-45edd40b","./hooks/UNSAFE_useTabbableMode","preact","./utils/UNSAFE_mergeProps","./index-173030cd","./index-696f9e7b","./UNSAFE_Icon","./Icon-3f9a8f0d","./hooks/UNSAFE_useTooltip","./hooks/UNSAFE_useId","./UNSAFE_Floating","./Floating-44114750","./index-e6354839","./hooks/UNSAFE_useUser","./UNSAFE_Environment","./UNSAFE_Layer","./utils/PRIVATE_floatingUtils","./utils/PRIVATE_refUtils","./hooks/UNSAFE_useOutsideClick","./hooks/UNSAFE_useFocus","./hooks/UNSAFE_useTouch","./hooks/UNSAFE_useAnimation","./useAnimation-1a52f0c4","./hooks/UNSAFE_useTheme","./MessageDetail-d34864b4","./MessageFormattingUtils-bf5de0fd","./utils/UNSAFE_getLocale","./utils/UNSAFE_stringUtils","./stringUtils-7012261b","./Message.types-23350d23","./MessageStartIcon-66feb809","./MessageSummary-c8e827f6","./MessageTimestamp-839e805a","./utils/UNSAFE_interpolations/boxalignment","./keys-08720ea5","./utils/UNSAFE_interpolations/flexbox","./flexbox-d23eebb7","./utils/UNSAFE_interpolations/flexitem","./flexitem-6045133a","./utils/UNSAFE_logger","./utils/UNSAFE_soundUtils","./PRIVATE_TransitionGroup","./hooks/UNSAFE_useMessagesContext"],function(e,s,t,n,o,i,a,l,r,u,c,g,d,h,_,F,f,A,E,U,S,m,N,x,v,b,p,k,M,R,y,T,I,j,H,B,P,C,w,O,V,L,z,$,D,G,K,W,q,J,Q,X,Y,Z,ee,se,te,ne,oe,ie,ae,le,re,ue,ce,ge,de,he,_e,Fe,fe,Ae,Ee,Ue,Se,me,Ne){"use strict";const xe={entering:e=>({to:{maxHeight:`${e.scrollHeight}px`,overflow:"hidden"},options:{duration:250},end:{maxHeight:"none",overflow:"initial"}}),exiting:e=>Object.assign(Object.assign({},"none"===e.style.maxHeight&&{from:{maxHeight:`${e.scrollHeight}px`,overflow:"hidden"}}),{to:{maxHeight:0,overflow:"hidden"},end:{maxHeight:0,overflow:"hidden"},options:{duration:250}})},ve={maxHeight:0,overflow:"hidden"};e.MessageBanner=function({closeButtonRenderer:e,detailRendererKey:i,data:c,onClose:g,renderers:d,translations:h,type:_="section"}){const F=t.useRef(new Map),f=t.useRef(null),A=t.useRef(null),[E,U]=t.useState(),[S,m]=t.useState(c.length>0),N=t.useRef(c.length),x=t.useRef(0);N.current=c.length;const v=t.useCallback(e=>s=>F.current.set(e,s),[]);t.useImperativeHandle(A,()=>({focus:()=>{var e;if(c.length){const s=c[0].key;return null===(e=F.current.get(s))||void 0===e||e.focus(),!0}return!1},contains:e=>{var s,t;return!(!c.length||!e)&&(null!==(t=null===(s=f.current)||void 0===s?void 0:s.contains(e))&&void 0!==t&&t)}}),[c]);const{controller:b,handlers:p}=n.useMessageFocusManager(A,{onFocus:t.useCallback(()=>{U(null==h?void 0:h.navigationFromMessagesRegion)},[U,h])}),k=t.useCallback(e=>{null==g||g(e)},[g]),M=t.useCallback((e,s,t)=>{var n;const o=null==t?void 0:t.contains(document.activeElement);if(0===N.current)return m(!1),void(o&&b.restorePriorFocus());const i=s+1<c.length?s+1:s-1;if(i>-1&&o){const e=c[i].key;null===(n=F.current.get(e))||void 0===n||n.focus()}},[b,c]);return t.useEffect(()=>{c.length?(m(!0),c.length>x.current&&U(null==h?void 0:h.navigationToMessagesRegion),b.prioritize()):U(""),x.current=c.length},[b,c,h]),S||0!==c.length?s.jsx("div",Object.assign({ref:f,class:"oj-c-messagebanner",tabIndex:-1},p,{children:s.jsxs(l.Flex,Object.assign({direction:"column",gap:"section"===_?"1x":void 0},{children:[s.jsx(r.MessagesManager,Object.assign({animationStates:xe,initialAnimationStyles:ve,data:c,onMessageWillRemove:M},{children:({index:t,item:n})=>s.jsx(o.Message,{messageRef:v(n.key),item:n,closeButtonRenderer:e,detailRenderer:u.getRenderer(n,i,d),index:t,variant:"page"===_?"pageBanner":"sectionBanner",onClose:k,translations:h},n.key)})),s.jsx(a.LiveRegion,{children:E})]}))})):null},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=UNSAFE_MessageBanner.js.map
